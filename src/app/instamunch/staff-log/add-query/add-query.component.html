<div class="app-main__outer">
  <div class="app-main__inner">
    <div class="app-page-title">
      <div class="page-title-wrapper">
        <div class="page-title-heading">
          <div class="page-title-icon bg-warning text-white">
            <i class="icofont-dashboard-web  ">
            </i>
          </div>
          <div> Log Managment
            <div class="page-title-subheading">Add Query
            </div>
          </div>
        </div>
        <div class="page-title-actions">
          <div class="d-inline-block dropdown">
            <a (click)="navigateToQueryListing()" class="border-0 btn-transition btn btn-outline-focus">
              <i class="icofont-arrow-left"></i> back to list
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12 col-lg-12">
        <ul class="body-tabs body-tabs-layout tabs-animated body-tabs-animated nav">
          <li class="nav-item">
            <a role="tab" class="nav-link active" id="tab-0" data-toggle="tab" href="#tab-content-0">
              <span>Query Information</span>
            </a>
          </li>
        </ul>
        <div class="card mb-3">

          <div class="tab-content">
            <div class="tab-pane show active" id="tab-content-0" role="tabpanel">
              <div class="card">
                <!-- <mat-progress-bar *ngIf="!loaded" mode="indeterminate"></mat-progress-bar>
              -->

                <form [formGroup]="queryForm" #formDir="ngForm" (ngSubmit)="onSubmit(queryForm)">
                  <div class="card-header">

                    <div style="width: 100%;" class="row">

                      <div class="col-lg 6">
                        Add New Query
                      </div>


                      <div class="col-lg 6">
                        <button type="submit" style="float: right; margin-right: -30px;" class="btn btn-sm btn-success">
                          Add Query
                        </button>
                      </div>

                    </div>
                  </div>


                  <div style="margin: 20px" class="">
                    <div class="form-group">
                      <label for="question">Question <span style="color: red;">*</span></label>
                      <input type="question" formControlName="question" class="form-control" id="question">
                      <span style="color: red;" *ngIf="getFormControl('question').invalid &&
                      (getFormControl('question').dirty || getFormControl('question').touched ||formDir.submitted)">
                        Question is required.
                      </span>
                    </div>
                  </div>

                </form>
                <!-- <app-form [clear_form]="clear_form" [submit_clicked]="submit_clicked"
                  (formValues)="getQueryData($event)" [form]=form>
                </app-form> -->
                <br>

                <div class="card-header">Queries Listing
                  <div class="btn-actions-pane-right">

                    <span>
                      <i *ngIf="loaded; else spin;" (click)="refresh()" class="fa fa-refresh"
                        style="font-size: 30px; margin-right: 5px;"></i>
                      <ng-template #spin>
                        <i (click)="refresh()" class="fa fa-refresh fa-spin"
                          style="font-size: 30px; margin-top: 5px;"></i>
                      </ng-template>
                    </span>

                    <div style="margin-bottom: 10px;" role="group" class="btn-group-sm btn-group">
                      <button (click)="deleteMultipleQuestions()" style="margin-left: 4px;" type="button"
                        class="btn-shadow  btn btn-danger">
                        <i class="icofont-trash"></i> Delete Selected
                      </button>
                    </div>
                  </div>
                </div>

                <mat-progress-bar *ngIf="!loaded" mode="indeterminate"></mat-progress-bar>
                <div class="card-body">

                  <div class="table-responsive">
                    <!-- <mat-form-field style="width: 100%;">
<input matInput  (keyup)="applyFilter($event.target.value)" placeholder="Filter">
</mat-form-field> -->


                    <div class="mat-elevation-z8" style="overflow: auto;">
                      <table mat-table [dataSource]="dataSource" style="width: 100%;">
                        <div>
                          <ng-container matColumnDef="select">
                            <th mat-header-cell *matHeaderCellDef>
                              <mat-checkbox color="primary" (change)="$event ? masterToggle() : null"
                                [checked]="selection.hasValue() && isAllSelected()"
                                [indeterminate]="selection.hasValue() && !isAllSelected()">
                              </mat-checkbox>
                            </th>
                            <td mat-cell *matCellDef="let row">
                              <mat-checkbox color="primary" (click)="$event.stopPropagation()"
                                (change)="checkboxClicked($event,row)" [checked]="selection.isSelected(row)">
                              </mat-checkbox>
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="Query">
                            <th mat-header-cell *matHeaderCellDef> Query </th>
                            <td mat-cell *matCellDef="let element"> {{element.question}} </td>
                          </ng-container>

                          <ng-container matColumnDef="actions">
                            <th mat-header-cell *matHeaderCellDef width="15%"> Actions </th>
                            <td mat-cell *matCellDef="let element">
                              <div class="buttons">

                                <button style="margin-right: 3px; margin-top: 3px; margin-bottom: 3px;"
                                  (click)="openDialog(element.id)" class="btn btn-success btn-sm"><i
                                    style="margin-top: -2px;" class="fa fa-edit"></i></button>
                                <button style="margin-top: 3px; margin-bottom: 3px;"
                                  (click)="getQuestionId(element.id,'delete')" class="btn btn-danger btn-sm"><i
                                    style="margin-top: -2px;" class="fa fa-trash-o"></i></button>
                                <!-- <button style="margin-top: 3px; margin-bottom: 3px;"  (click)="openDialog(element.id)" class="btn btn-danger btn-sm"><i
        style="margin-top: -2px;" class="fa fa-trash-o"></i></button> -->

                                <!-- <a style="color: #8f8f8f;" (click)="getQuestionId(element.id,'edit')" class="mb-2 mr-2 btn-transition btn btn-outline-light btn-sm">Edit</a>
    <button (click)="getQuestionId(element.id,'delete')" class="mb-2 mr-2 btn-transition btn btn-outline-light btn-sm">Delete</button> -->
                              </div>
                            </td>
                          </ng-container>


                        </div>
                        <tr mat-header-row *matHeaderRowDef="table_headers"></tr>
                        <tr mat-row *matRowDef="let row; columns: table_headers;"></tr>
                      </table>

                      <mat-paginator #paginator [pageSize]="10" showFirstLastButtons
                        [pageSizeOptions]="[10,50,100,500]">
                      </mat-paginator>

                    </div>

                  </div>
                </div>
              </div>

            </div>

          </div>
        </div>


      </div>
    </div>
  </div>
</div>
